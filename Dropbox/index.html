<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Dropbox Saver</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <style>
        .carousel{
            background-color: #3a3a3a;
            margin-top: 20px;
        }
        .carousel-item{
            text-align: center;
            min-height: 280px; /* Prevent carousel from being distorted if for some reason image doesn't load */
        }
        .bs-example{
            margin: 20px;
        }
        img {
            margin-top: 20px;
            max-height:200px;
        }
        div{
            text-align: center;
        }

    </style>
    </head>
    <body>
    <div class="container">
        <h2>Obtén las siguientes imágenes de las marcas de coches en tu Dropbox:</h2>
        <div class="bs-example">
            <div id="myCarousel" class="carousel slide" data-ride="carousel">
                <!-- Carousel indicators -->
                <ol class="carousel-indicators">
                    <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                    <li data-target='#myCarousel' data-slide-to='1'></li>
                    <li data-target='#myCarousel' data-slide-to='2'></li>
                    <li data-target='#myCarousel' data-slide-to='3'></li>
                    <li data-target='#myCarousel' data-slide-to='4'></li>
                    <li data-target='#myCarousel' data-slide-to='5'></li>
                </ol>
                <!-- Wrapper for carousel items -->
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img src="https://raw.githubusercontent.com/sereto111/img2DAW/main/servCoches/AudiLogo.png" alt="Audi">
                    </div>
                    <div class='carousel-item'>
                        <img src='https://raw.githubusercontent.com/sereto111/img2DAW/main/servCoches/BMW.png' alt='BMW'>
                    </div>
                    <div class='carousel-item'>
                        <img src='https://raw.githubusercontent.com/sereto111/img2DAW/main/servCoches/Citroen.png' alt='Citroen'>
                    </div>
                    <div class='carousel-item'>
                        <img src='https://raw.githubusercontent.com/sereto111/img2DAW/main/servCoches/Ford.png' alt='Ford'>
                    </div>
                    <div class='carousel-item'>
                        <img src='https://raw.githubusercontent.com/sereto111/img2DAW/main/servCoches/Nissan.png' alt='Nissan'>
                    </div>
                    <div class='carousel-item'>
                        <img src='https://raw.githubusercontent.com/sereto111/img2DAW/main/servCoches/Seat.png' alt='Seat'>
                    </div>
                </div>
                <!-- Carousel controls -->
                <a class="carousel-control-prev" href="#myCarousel" data-slide="prev">
                    <span class="carousel-control-prev-icon"></span>
                </a>
                <a class="carousel-control-next" href="#myCarousel" data-slide="next">
                    <span class="carousel-control-next-icon"></span>
                </a>
            </div>
        </div>

    </div> <!-- container -->
    <div id="container"></div>

    <script type="text/javascript" src="https://www.dropbox.com/static/api/2/dropins.js" id="dropboxjs" data-app-key="d66zjkjoutbkeik"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            let files = [];
            let carouselItems = document.querySelectorAll('.carousel-item');
            carouselItems.forEach(function(item, index) {
                let imgUrl = item.querySelector('img').src;
                let filename = 'carBrand_' + (index + 1) + '.png';
                files.push({ 'url': imgUrl, 'filename': filename });
            });

            let options = {
                files: files,
                success: function () {
                    alert("Ficheros subidos a tu Dropbox con éxito. En caso de querer volver a subirlos, recarga esta página.");
                },
                progress: function (progress) {
                },
                cancel: function () {
                    alert("Has cancelado la subida");
                },
                error: function (errorMessage) {
                }
            };
            let button = Dropbox.createSaveButton(options);
            document.getElementById("container").appendChild(button);
        });
    </script>
</body>
</html>